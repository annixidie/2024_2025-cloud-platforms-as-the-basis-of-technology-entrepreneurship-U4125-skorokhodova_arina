# Лаботраторная работа 4 

## Логика:  
 1. Пользователь открывает веб-страницу.   
	2.	Запрос отправляется на обработку в backend (через Cloud Run или GKE).  
	3.	Backend:  
	•	Обрабатывает команды: start, stop, reset  
	•	Записывает результаты в базу данных  
	•	Отдаёт данные клиенту (например, историю сессий)  
	4.	Данные сохраняются:  
	•	Firestore или Cloud SQL — текстовые/временные данные  
	•	Cloud Storage — если появятся медиа или отчёты  
	5.	Используются мониторинг и логгирование — для стабильности и анализа  


В рамках лабораторной работы рассматривается простой веб-сервис с тремя __стадиями жизненного цикла__:  
	1.	Начальная разработка  
	2.	Тестирование партнерами  
	3.	Продовое (production) решение  

__Для каждой стадии:__  
	•	Представлена архитектурная схема  
	•	Рассчитана примерная стоимость  
	•	Обоснован выбор сервисов Google Cloud Platform  

## 1. Начальная разработка  

        •	Минимальный backend на Cloud Run  
	•	Все данные сохраняются в Firestore  
	•	Хостинг логики и обработки в одном контейнере  
	•	Нет масштабирования, мониторинга или балансировки  
	•	Цель: протестировать базовую логику и UI  

__Описание архитектуры:__  
	•	Frontend и backend развёрнуты на Cloud Run  
	•	Статические файлы хранятся в Cloud Storage  
	•	Пользовательские настройки таймера — в Firestore  

<img width="890" alt="image" src="https://github.com/user-attachments/assets/957a22bb-3c48-46df-9258-f69d6c96d8f9" />


__Примерная стоимость (в мес):__   
<img width="279" alt="image" src="https://github.com/user-attachments/assets/dc7f817b-a4f0-4960-b04c-78bacff7ac8c" />


__Обоснование:__  
	•	Cloud Run быстро масштабируется, нет затрат при простое  
	•	Firestore не требует настройки и работает как key-value  
	•	Cloud Storage дешев для хранения статики и логов  

## 2. Тестирование партнерами  

        •	Добавляется Cloud Load Balancer: можно привлекать первых внешних пользователей  
	•	Подключён Cloud Monitoring: отслеживаем ошибки и медленные ответы  
	•	Всё ещё используется Cloud Run, Firestore и Storage  
	•	Возможность A/B тестирования новых фич  

__Описание архитектуры:__  
	•	Запросы проходят через Cloud Load Balancing  
	•	Приложение развёрнуто на Cloud Run  
	•	Статические ресурсы отдаются из Cloud Storage  
	•	Пользовательские данные — в Firestore  
	•	Метрики и логи собираются через Cloud Monitoring  

<img width="795" alt="image" src="https://github.com/user-attachments/assets/5b41a887-dfbd-44da-acab-d16c8e5c8e13" />


__Примерная стоимость (в мес):__  
<img width="285" alt="image" src="https://github.com/user-attachments/assets/1d5ab278-d04d-4288-9248-55195d56cff2" />

__Обоснование:__  
	•	Load Balancer нужен для теста нагрузки и пиков  
	•	Cloud Monitoring отслеживает ошибки и стабильность  
	•	Инфраструктура легко масштабируется  

## 3. Продовое решение  

        •	Backend переходит в Google Kubernetes Engine (GKE): надёжность, масштабируемость  
	•	Добавляется Cloud SQL: нужны транзакции, отношения между таблицами (например, пользователи и их сессии)  
	•	Включены Cloud Monitoring + Logging: SLA, безопасность, алерты  
	•	Используется Cloud CDN и Load Balancer: высокая скорость и доступность  

__Описание архитектуры:__  
	•	Запросы идут через Cloud Load Balancing  
	•	Приложение развёрнуто в Google Kubernetes Engine (GKE)  
	•	База данных — Cloud SQL (PostgreSQL)  
	•	Статика в Cloud Storage, кэшируется через Cloud CDN  
	•	Используются Cloud Logging и Cloud Monitoring  

<img width="1225" alt="image" src="https://github.com/user-attachments/assets/03d75507-3ec0-4594-a531-10423c62ad40" />

__Примерная стоимость (в мес):__  
<img width="286" alt="image" src="https://github.com/user-attachments/assets/01d52d03-9dac-43af-886a-ceb751e307a4" />


__Обоснование:__  
	•	GKE обеспечивает отказоустойчивость и масштабируемость  
	•	Cloud SQL надёжнее Firestore при больших объемах и сложных запросах  
	•	Cloud CDN снижает задержки и ускоряет загрузку  
	•	Мониторинг и логирование — обязательны для продакшена  
